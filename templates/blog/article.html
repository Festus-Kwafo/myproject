{%extends '../store/base.html'%} {%load static%} {%block content%}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
 <!-- highlight js -->
 <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/monokai-sublime.min.css">
 <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
 <script>hljs.initHighlightingOnLoad();</script>
 <script>
    function handleReply(response_id) {
        const reply_form_container = document.querySelector(`#reply-form-container-${response_id}`)
        if (reply_form_container) {
            reply_form_container.style.display = 'block';
        }
    }
    function handleCancel(response_id) {
        const reply_form_container = document.querySelector(`#reply-form-container-${response_id}`)
        if (reply_form_container) {
            reply_form_container.style.display = 'none';
        }
    }
</script>
<div class="container pt-4 pb-4">
	<div class="row justify-content-center">
		<article class="row justify-content-center">
			<figure>
			 <img src="{{post.image.url}}" class="rounded" alt="{{post.title}}">
			</figure>
			<div class="mt-3">
				<h1>{{post.title}}</h1>
				<p class="text-muted">
					Published {{ post.publish.date }} by <strong>{{ post.author }}</strong>
				</p>
			</div>
			<div class="container">
					{{post.body|safe}}
			</div>
			
		</article>
		<hr/>
        <h3>Add Comment</h3>
        <form method="post" action="">
            {% csrf_token %}
            {{ comment_form.as_p }}
            <button type="submit" class="btn btn-primary">Comment</button>
        </form>
    
        {% with comments.count as total_comments %}
            <h3 class="mt-5">
                {{ total_comments }} comment{{ total_comments|pluralize }}
            </h3>
        {% endwith %}
        {% if not post.comments.all %}
            No comments yet
        
        {% else %}
            {% for comment in post.get_comments %}
                {% include './comment.html' with comment=comment %}
            {% endfor %}
        {% endif %}
        </div>
        <div class="my-3">
            <h3>Similar Posts</h3>
        </div>
        <div class="row">
            {% for post in similar_posts %}
            <div class="col-md-6 col-sm-6 col-lg-4 mb-3">
                <div class="card border-0">
                    <div class="ratio ratio-16x9">
                        <img src="{{ post.image.url }}" class="rounded featured-image-list" alt="{{post.title}}">
                    </div>
                    <div class="card-body p-0 m-0 mt-2">
                        <h2 class="card-title h6 my-0 py-0">
                            <a href="{{post.get_absolute_url}}">{{post.title}}</a>
                        </h2>
                        <p class="card-text">
                            <small class="text-muted">
                                <span>{{post.publish.date}} by
                                    <b>{{post.author}}</b></span>
                                <!-- <a href="" class="badge badge-light text-muted">{{post.tags.all|join:" "}}</a> -->
                            </small>
                        </p>
                        <!-- <p>{{post.body|truncatechars:100|linebreaks}}</p> -->
                    </div>
                </div>
            </div>
            {% empty %}
            <p class="text-muted">There is no similar post yet</p>
            {% endfor %}
        </div>
{%endblock%}


